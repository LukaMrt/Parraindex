{% extends 'layouts/base.html.twig' %}

{% set style = asset('styles/app.scss') %}
{% set title = 'Parraindex - Liens' %}

{% block javascripts %}
    <script type="module" src="{{ asset('scripts/editSponsor.js') }}" defer></script>
{% endblock %}

{% block content %}

    <form class="form" action="{{ url('home', {id: sponsor.id != null ? sponsor.id : 0}) }}"
          method="post">

        <h1 class="form__title">Gestion de lien</h1>

        <div class="form-content">

            <div class="form-block form-block--row">

                {% include "components/form/select.html.twig" with {
                    'slug': 'godFatherId',
                    'title': 'Parrain',
                    'options': people1,
                    'parent': '^[0-9]+$'
                } %}

                {% include "components/form/select.html.twig" with {
                    'slug': 'godChildId',
                    'title': 'Fillot',
                    'options': people2,
                    'parent': '^[0-9]+$'
                } %}

            </div>

            {% include "components/form/select.html.twig" with {
                'slug': 'sponsorType',
                'title': 'Type de parrainage',
                'options': sponsorTypes,
                'parent': '^[0-9]$'
            } %}

            {% include "components/form/input.html.twig" with {
                'type': 'date',
                'slug': 'sponsorDate',
                'title': 'Date du parrainage',
                'value': sponsor.date | date('Y-m-d'),
                'pattern': '.+'
            } %}

            {% include "components/form/textarea.html.twig" with {
                'slug': 'description',
                'title': 'Raison',
                'value': sponsor.description,
                'required': 'false'
            } %}

            <div class="form-block form-block--row">

                {% if (sponsor.id != 0) %}
                    <a href="{{ url('home', {id: sponsor.id}) }}">
                        {% include "components/button.html.twig" with {
                            'type': 'button',
                            'button_content': 'Supprimer',
                            'priority': 'danger'
                        } %}
                    </a>
                {% endif %}

                {% include "components/button.html.twig" with {
                    'type': 'submit',
                    'button_content': 'Valider',
                    'priority': 'primary'
                } %}

            </div>

        </div>

    </form>

{% endblock %}